<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Scribble X Dhamshrads </title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  <!-- Overlay used for every modal -->
  <div id="modalOverlay" class="modal-overlay hidden"></div>

  <div id="loginScreen" class="centered">
    <h1>Scribble X Dhamsharads</h1>

    <div class="card small">
      <input id="nameInput" placeholder="Enter your name" maxlength="20" />
    </div>

    <div class="card small actions">
      <button id="createRoomBtn">Create Room</button>
      <input id="roomCodeInput" placeholder="Room code (to join)"/>
      <button id="joinRoomBtn">Join Room</button>
    </div>

    <p class="muted">Open multiple windows or devices and use the same room code to play.</p>
  </div>

  <div id="gameScreen" class="hidden">
    <header class="topbar">
      <div><strong>Room:</strong> <span id="roomLabel">—</span> <small id="hostHint"></small></div>
      <div class="top-actions">
        <button id="settingsBtn" class="hidden">Settings</button>
        <button id="startBtn">Start</button>
        <button id="pauseBtn">Pause</button>
        <button id="leaveBtn">Leave</button>
      </div>
    </header>

    <main class="layout">
      <aside class="left">
        <div class="lobby card">
          <h3>Players</h3>
          <ul id="playersList"></ul>
          <div class="info">
            <div>Round: <span id="roundInfo">0/0</span></div>
            <div>Time: <span id="time">0</span>s</div>
            <div>Lang/Category: <span id="langCat">—</span></div>
          </div>
        </div>

        <div class="chatBox card">
          <div id="chatLog" class="chatLog"></div>
          <form id="chatForm">
            <input id="chatInput" placeholder="Type message or guess..." autocomplete="off"/>
            <button type="submit">Send</button>
          </form>
          <div style="margin-top:8px;">
            <button id="replayBtn">Replay Current Round</button>
            <button id="loadLastSavedBtn">Load Last Saved Round</button>
          </div>
        </div>
      </aside>

      <section class="main">
        <div class="toolbar card">
          <div class="tools">
            <label>Brush</label>
            <input id="brushRange" type="range" min="1" max="30" value="4"/>
            <label>Color</label>
            <input id="colorPicker" type="color" value="#000000"/>
            <button id="eraserBtn">Eraser</button>
            <button id="undoBtn">Undo</button>
          </div>
          <div id="wordBox" class="wordBox">Waiting...</div>
        </div>

        <div class="canvasWrap card">
          <canvas id="drawCanvas"></canvas>
        </div>
      </section>
    </main>
  </div>

  <!-- Settings modal (host only) -->
  <div id="settingsModal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modalCard">
      <h3>Room Settings</h3>
      <div>
        <label>Round time (secs): <input id="setRoundTime" type="number" min="10" max="300" value="60"/></label>
      </div>
      <div>
        <label>Max rounds: <input id="setMaxRounds" type="number" min="1" max="50" value="8"/></label>
      </div>
      <div>
        <label>Language:
          <select id="setLanguage">
            <option value="english">English</option>
            <option value="hindi">Hindi</option>
          </select>
        </label>
      </div>
      <div>
        <label>Category:
          <select id="setCategory">
            <option value="objects">Objects</option>
            <option value="animals">Animals</option>
            <option value="food">Food</option>
          </select>
        </label>
      </div>
      <div style="margin-top:12px">
        <label>Custom words (comma separated):</label>
        <textarea id="customWords" placeholder="e.g., mango, laptop, moonlight" rows="3" style="width:100%"></textarea>
      </div>
      <div style="margin-top:12px; display:flex; gap:8px; justify-content:center;">
        <button id="saveSettingsBtn">Save</button>
        <button id="cancelSettingsBtn">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Choose word modal -->
  <div id="chooseModal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modalCard">
      <h3>Pick a word to draw</h3>
      <div id="candidateList" class="candidateList"></div>
      <div class="muted small" style="margin-top:10px;">Auto-pick after 30s</div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/script.js"></script>
</body>
</html>
